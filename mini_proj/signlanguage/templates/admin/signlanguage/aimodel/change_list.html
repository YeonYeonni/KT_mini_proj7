{% extends "admin/change_list.html" %} {% load static %} {% block extrahead %}
{{ block.super }}
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.css"
/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const ctx = document.getElementById("myChart").getContext("2d");

    // Sample data
    const chartData = {{ chart_data | safe }};

    // Parse the dates to JS
    {% comment %} chartData.forEach((d) => {
      d.x = d['x']
      d.y = d['y']
    }); {% endcomment %}

    console.log(chartData)

    // Render the chart
    const chart = new Chart(ctx, {
      type: "bar",
      data: {
        datasets: [
          {
            label: "model accuracy",
            data: chartData,
            backgroundColor: "rgba(220,20,20,0.5)",
          },
        ],
      },
      options: {
        {% comment %} responsive: true, {% endcomment %}
        parsing: {
          xAxisKey: 'x',
          yAxisKey: 'y'
        },
        {% comment %} scales: {
          y:  {
            beginAtZero: true,
          },
        }, {% endcomment %}
      },
    });
  });
</script>
{% endblock %} {% block content %}
<!-- Render our chart -->
<div style="width: 80%">
  <canvas
    style="margin-bottom: 30px; width: 60%; height: 50%"
    id="myChart"
  ></canvas>
</div>
<!-- Render the rest of the ChangeList view -->
{{ block.super }} {% endblock %}
