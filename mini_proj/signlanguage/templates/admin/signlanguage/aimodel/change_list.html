{% extends "admin/change_list.html" %} {% load static %} {% block extrahead %}
{{ block.super }}
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.css"
/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const ctx = document.getElementById("myChart").getContext("2d");

    // Sample data
    const chartData = {{ chart_data | safe }};

    console.log(chartData.map((d) => d["prediction_count"]))

    // Render the chart
    const chart = new Chart(ctx, {
      type: "bar",
      data: {
        labels: chartData.map((d) => d['x']),
        datasets: [
          {
            label: "model accuracy",
            data: chartData.map((d) => d['y']),
            backgroundColor: "rgba(220,20,20,0.5)",
          },
          {
            type: "line",
            label: "model prediction count",
            data: chartData.map((d) => d['prediction_count']),
            fill: false,
            borderColor: 'rgb(54, 162, 235)'
          },
        ],
      },
      options: {
        responsive: true,
        scales: {
          yAxes:  [{
            ticks: {
              beginAtZero: true,
            }
          }],
        },
      },
    });
  });
</script>

{% endblock %} {% block content %}
<!-- Render our chart -->
<div style="width: 80%">
  <canvas
    style="margin-bottom: 30px; width: 60%; height: 30%"
    id="myChart"
  ></canvas>
</div>
<!-- Render the rest of the ChangeList view -->
{{ block.super }} {% endblock %}
